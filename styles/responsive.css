/* styles/responsive.css */

@supports (padding-top: env(safe-area-inset-top)) {
    #correctionPopup {
        padding-top: env(safe-area-inset-top);
        padding-bottom: env(safe-area-inset-bottom);
        padding-left: env(safe-area-inset-left);
        padding-right: env(safe-area-inset-right);
    }
}

@media (max-width: 768px) {
    #correctionPopup {
        align-items: stretch;
        justify-content: stretch;
        padding: 0;
        box-sizing: border-box;
    }

    #correctionPopup .popup-content {
        /* 화면 전체를 가득 채움 */
        width: 100vw;
        height: 100vh;
        max-width: none;
        max-height: none;
        min-height: auto;
        border-radius: 0;
        box-shadow: none;
        border: none;
        margin: 0;
        
        /* Safe area 고려한 내부 패딩 */
        padding-top: env(safe-area-inset-top, 0px);
        padding-bottom: env(safe-area-inset-bottom, 0px);
        padding-left: env(safe-area-inset-left, 0px);
        padding-right: env(safe-area-inset-right, 0px);
        box-sizing: border-box;
    }
    
    #correctionPopup .header {
        padding: 16px 20px 12px;
        /* Safe area 추가 패딩 */
        padding-left: max(20px, env(safe-area-inset-left, 0px) + 20px);
        padding-right: max(20px, env(safe-area-inset-right, 0px) + 20px);
        padding-top: max(16px, env(safe-area-inset-top, 0px) + 16px);
    }
    
    #correctionPopup .header h2 {
        font-size: 16px;
    }
    
    #correctionPopup .content {
        padding: 16px 20px 0;
        /* Safe area 추가 패딩 */
        padding-left: max(20px, env(safe-area-inset-left, 0px) + 20px);
        padding-right: max(20px, env(safe-area-inset-right, 0px) + 20px);
    }
    
    #correctionPopup .preview-section {
        padding: 12px;
        margin-bottom: 16px;
    }
    
    #correctionPopup .preview-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
    }
    
    #correctionPopup .color-legend {
        order: 1;
        align-self: flex-start;
        margin-left: 0;
        margin-top: 6px;
        gap: 8px;
        font-size: 10px;
        padding: 3px 6px;
        background: var(--background-secondary);
        border-radius: 4px;
    }
    
    #correctionPopup .preview-label {
        order: 0;
    }
    
    #correctionPopup .color-legend-dot {
        width: 8px;
        height: 8px;
    }
    
    #correctionPopup .pagination-controls {
        order: 2;
        align-self: flex-end;
    }
    
    #correctionPopup .pagination-btn {
        padding: 8px 12px;
        font-size: 14px;
        min-height: 36px;
        min-width: 60px;
    }
    
    #correctionPopup .pagination-btn.small {
        padding: 6px 10px;
        font-size: 12px;
        min-height: 32px;
        min-width: 50px;
    }
    
    #correctionPopup .page-info {
        font-size: 14px;
        min-width: 60px;
    }
    
    #correctionPopup .page-info.small {
        font-size: 12px;
        min-width: 50px;
    }
    
    #correctionPopup .error-item {
        padding: 10px;
        margin-bottom: 10px;
    }
    
    #correctionPopup .error-original {
        font-size: 14px;
        padding: 6px 10px;
    }
    
    #correctionPopup .suggestion-option {
        padding: 8px 12px;
        font-size: 13px;
        min-height: 36px;
        display: flex;
        align-items: center;
        border-radius: 16px;
    }
    
    #correctionPopup .button-area {
        gap: 10px;
        padding: 16px 20px 20px;
        /* Safe area 추가 패딩 */
        padding-left: max(20px, env(safe-area-inset-left, 0px) + 20px);
        padding-right: max(20px, env(safe-area-inset-right, 0px) + 20px);
        padding-bottom: max(20px, env(safe-area-inset-bottom, 0px) + 20px);
    }
    
    #correctionPopup .cancel-btn,
    #correctionPopup .apply-btn {
        padding: 12px 20px;
        font-size: 15px;
        min-height: 44px;
        border-radius: 8px;
        flex: 1;
    }
    
    .clickable-error {
        padding: 4px 2px;
        margin: 0 1px;
        border-radius: 3px;
        min-height: 28px;
        display: inline-flex;
        align-items: center;
    }
    
    #correctionPopup .preview-text {
        font-size: 14px;
        line-height: 1.6;
        min-height: 150px;
        -webkit-overflow-scrolling: touch;
    }
    
    #correctionPopup .error-summary:not(.collapsed) .error-summary-content {
        height: 220px;
    }
    
    #correctionPopup .error-suggestions {
        gap: 8px;
    }
    
    #correctionPopup .error-summary {
        margin-top: 12px;
        padding-top: 12px;
    }
    
    #correctionPopup .close-btn-header {
        width: 36px;
        height: 36px;
        font-size: 20px;
    }
    
    @media (max-height: 700px) {
        #correctionPopup .popup-content {
            min-height: 400px;
        }
    }
    
    @media (max-width: 896px) and (orientation: landscape) {
        #correctionPopup {
            padding-top: max(env(safe-area-inset-top, 0px), 10px);
            padding-bottom: max(env(safe-area-inset-bottom, 0px), 10px);
        }
        
        #correctionPopup .popup-content {
            height: calc(100vh - max(env(safe-area-inset-top, 0px), 10px) - max(env(safe-area-inset-bottom, 0px), 10px) - 20px);
        }
    }
    
    #correctionPopup .error-item-compact {
        padding: 10px;
        margin-bottom: 8px;
    }
    
    #correctionPopup .error-original-compact {
        font-size: 12px;
        padding: 3px 6px;
        min-width: 50px;
    }
    
    #correctionPopup .suggestion-compact {
        font-size: 12px;
        padding: 4px 8px;
        min-height: 32px;
        border-radius: 16px;
        display: flex;
        align-items: center;
    }
    
    #correctionPopup .error-help-compact {
        font-size: 11px;
        margin-top: 4px;
    }
}
